{
  "input_datatypes": [
    {
      "name": "bastionhost",
      "label": "Bastion Data"
    },
    {
      "name": "vSphere-System",
      "label": "vCenter Data"
    },
    {
      "name": "network",
      "label": "Network Data"
    },
    {
      "name": "ssh-credentials",
      "label": "SSH Credentials"
    },
    {
      "name": "vm-size",
      "label": "VM Size"
    },
    {
      "name": "linux-vmware-template",
      "label": "VMware template"
    }
  ],
  "output_datatype": "content_template_output",
  "input_groups": [
    {
      "name": "bastion",
      "label": "Bastion host variables"
    },
    {
      "name": "cloud",
      "label": "Cloud Input Variables"
    },
    {
      "name": "virtualmachine",
      "label": "Virtual Machine Input Variables"
    }
  ],
  "template_input_params": [
    {
    		"name": "name",
    		"label": "Hostname",
    		"description": "Name of the Virtual Machine",
    		"hidden": false,
    		"immutable": false,
    		"required": true,
    		"secured": false,
    		"type": "string",
    		"group_name": "virtualmachine"
    },
    {
    		"name": "vm_template",
    		"label": "VM Template",
    		"description": "Source VM or Template label for cloning",
    		"hidden": true,
    		"immutable": false,
    		"required": true,
    		"secured": false,
    		"type": "string",
    		"default": "${linux-vmware-template.vm_template}",
    		"group_name": "linux-vmware-template"
    },
    {
        "name": "domain_name",
        "label": "DNS Domain Name",
        "description": "DNS Domain Name for VM",
        "hidden": false,
        "immutable": false,
        "required": false,
        "type": "string",
        "default": "isstlab.staines.uk.ibm.com",
        "options": [
          {
            "value": "isstlab.staines.uk.ibm.com",
            "label": "isstlab.staines.uk.ibm.com"
          },
          {
            "value": "localdomain",
            "label": "localdomain"
          },
          {
            "value": "hursley.ibm.com",
            "label": "hursley.ibm.com"
          }
        ],
        "group_name": "virtualmachine"
    },
    {
        "name": "ipv4_subnet_index",
        "label": "IPv4 subnet index",
        "description": "The last element of an IPv4 Subnet address e.g. 10-253 for a /24 subnet",
        "hidden": false,
        "immutable": false,
        "required": true,
        "secured": false,
        "type": "string",
        "group_name": "virtualmachine"
    },
    {
        "name": "create_vm_folder",
        "label": "Create VM folder",
        "description": "Set to 1 if a vSphere folder needs to be created and to 0 otherwise (use an existing folder)",
        "default": "0",
        "hidden": false,
        "immutable": false,
        "required": true,
        "secured": false,
        "type": "string",
        "group_name": "cloud"
    },
    {
        "name": "allow_selfsigned_cert",
        "label": "Allow selfsigned certificate",
        "description": "Communication with vsphere server with self signed certificate",
        "default": "true",
        "hidden": false,
        "immutable": false,
        "required": true,
        "secured": false,
        "type": "string",
        "group_name": "cloud"
    },
    {
      "name": "bastion_host",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion host for ssh proxy",
      "default": "${bastionhost.bastion_host}",
      "label": "Bastion host",
      "secured": false,
      "required": false
    },
    {
      "name": "bastion_port",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion port for ssh proxy",
      "default": "${bastionhost.bastion_port}",
      "label": "Bastion port",
      "secured": false,
      "required": false
    },
    {
      "name": "bastion_user",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion user for ssh proxy",
      "default": "${bastionhost.bastion_user}",
      "label": "Bastion user",
      "secured": false,
      "required": false
    },
    {
      "name": "bastion_private_key",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion private key for ssh proxy",
      "default": "${bastionhost.bastion_private_key}",
      "label": "Bastion private key",
      "secured": true,
      "required": false
    },
    {
      "name": "bastion_password",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion user password for ssh proxy",
      "default": "${bastionhost.bastion_password}",
      "label": "Bastion user password",
      "secured": true,
      "required": false
    },
    {
      "name": "bastion_host_key",
      "type": "string",
      "group_name": "bastion",
      "hidden": true,
      "description": "Bastion host public key for ssh proxy",
      "default": "${bastionhost.bastion_host_key}",
      "label": "Bastion host key",
      "secured": false,
      "required": false
    },
    {
      "name": "network_label",
      "type": "string",
      "group_name": "network",
      "description": "Select vSphere Portgroup name",
      "label": "vSphere Portgroup Name",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${network.network_label}"
    },
    {
      "name": "ipv4_subnet",
      "type": "string",
      "group_name": "network",
      "description": "Select IP Subnet",
      "label": "IPv4 Subnet",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${network.ipv4_subnet}"
    },
    {
      "name": "datacenter",
      "type": "string",
      "group_name": "vSphere-System",
      "description": "Enter the vSphere Datacenter",
      "label": "vSphere Data Center",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${vSphere-System.datacenter}"
    },
    {
      "name": "cluster",
      "type": "string",
      "group_name": "vSphere-System",
      "description": "Select vSphere Cluster",
      "label": "vSphere Cluster",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${vSphere-System.cluster}"
    },
    {
      "name": "storage",
      "type": "string",
      "group_name": "vSphere-System",
      "description": "vSphere Datastore Cluster",
      "label": "vSphere Datastore Cluster",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${vSphere-System.storage}"
    },
    {
      "name": "folder",
      "type": "string",
      "group_name": "vSphere-System",
      "description": "Enter vSphere folder",
      "label": "vSphere Folder",
      "required": "true",
      "secured": "false",
      "immutable": "false",
      "hidden": "false",
      "default": "${vSphere-System.folder}"
    },
    {
      "name": "ssh_user",
      "type": "string",
      "group_name": "ssh-credentials",
      "description": "SSH userid for ICAM connection",
      "label": "SSH userid",
      "required": true,
      "secured": false,
      "immutable": false,
      "hidden": true,
      "default": "${ssh-credentials.ssh_user}"
    },
    {
      "name": "ssh_password",
      "type": "password",
      "group_name": "ssh-credentials",
      "description": "Password that matches the ssh userid",
      "label": "SSH user password",
      "required": false,
      "secured": true,
      "immutable": false,
      "hidden": true,
      "default": "${ssh-credentials.ssh_password}"
    },
    {
      "name": "ssh_user_private_key",
      "type": "password",
      "group_name": "ssh-credentials",
      "description": "The base 64 encoded private key of the userid (echo .ssh/id_rsa | base64 -w0 ) . This parameter can be used instead of ssh_password",
      "label": "SSH User Private Key",
      "required": false,
      "secured": true,
      "immutable": false,
      "hidden": true,
      "default": "${ssh-credentials.ssh_user_private_key}"
    },
    {
        "name": "vcpu",
        "label": "VCPU",
        "description": "Number of Virtual CPU for the Virtual Machine",
        "default": "${vm-size.vcpu}",
        "hidden": true,
        "immutable": false,
        "required": true,
        "secured": false,
        "type": "string",
        "group_name": "vm-size"
    },
    {
        "name": "memory",
        "description": "Memory for Virtual Machine in MBs",
        "default": "${vm-size.memory}",
        "type": "string",
        "required": true,
        "secured": false,
        "label": "memory",
        "hidden": true,
        "immutable": false,
        "group_name": "vm-size"
    },
    {
        "name": "rootdisksize",
        "description": "Root disk size in GBs",
        "default": "${vm-size.rootdisksize}",
        "type": "string",
        "required": true,
        "secured": false,
        "label": "rootdisksize",
        "hidden": true,
        "immutable": false,
        "group_name": "vm-size"
    }
  ],
  "template_output_params": []
}
